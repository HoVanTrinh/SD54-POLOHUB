<!--<!DOCTYPE html>-->
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      layout:decorate="~{admin/admin-layout.html}">-->


<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Title</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"-->
<!--          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">-->
<!--</head>-->
<!--<body>-->
<!--<div layout:fragment="content">-->
<!--    <div class="custom-modal" id="add-brand-modal">-->
<!--        <div class="modal-content rounded">-->
<!--            <span class="close" id="closeModal">&times;</span>-->
<!--            <div class="modal-header mb-1">-->
<!--                <h5>Thêm nhãn hàng mới</h5>-->
<!--            </div>-->
<!--            <form id="brand-form">-->
<!--                <div class="form-group">-->
<!--                    <label for="brandCode">Mã nhãn hàng:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="brandCode" id="brandCode" placeholder="Nhập mã nhãn hàng">-->
<!--                    <span class="error"></span>-->
<!--                    &lt;!&ndash; Add more fields as needed &ndash;&gt;-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="brandName">Tên nhãn hàng:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="brandName" id="brandName" placeholder="Nhập tên nhãn hàng">-->
<!--                    <span class="error"></span>-->
<!--                    &lt;!&ndash; Add more fields as needed &ndash;&gt;-->
<!--                </div>-->
<!--                <button class="btn btn-primary mt-2 w-100" id="save-brand-btn">Lưu</button>-->
<!--            </form>-->

<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash;    MODAL THỂ LOẠI&ndash;&gt;-->
<!--    <div class="custom-modal" id="add-category-modal">-->
<!--        <div class="modal-content rounded">-->
<!--            <span class="close" >&times;</span>-->
<!--            <div class="modal-header mb-1">-->
<!--                <h5>Thêm loại hàng mới</h5>-->
<!--            </div>-->
<!--            <form id="category-form">-->
<!--                <div class="form-group">-->
<!--                    <label for="categoryCode">Mã loại:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="categoryCode" id="categoryCode" placeholder="Nhập mã loại">-->
<!--                    <span class="error"></span>-->
<!--                    &lt;!&ndash; Add more fields as needed &ndash;&gt;-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="categoryName">Tên loại:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="categoryName" id="categoryName" placeholder="Nhập tên loại">-->
<!--                    <span class="error"></span>-->
<!--                    &lt;!&ndash; Add more fields as needed &ndash;&gt;-->
<!--                </div>-->
<!--                <button class="btn btn-primary mt-2 w-100" id="save-category-btn">Lưu</button>-->
<!--            </form>-->

<!--        </div>-->
<!--    </div>-->
<!--    &lt;!&ndash;    End modal thể loại&ndash;&gt;-->

<!--    &lt;!&ndash;    MODAL Chất liệu&ndash;&gt;-->
<!--    <div class="custom-modal" id="add-material-modal">-->
<!--        <div class="modal-content rounded">-->
<!--            <span class="close" >&times;</span>-->
<!--            <div class="modal-header mb-1">-->
<!--                <h5>Thêm chất liệu mới</h5>-->
<!--            </div>-->
<!--            <form id="material-form">-->
<!--                <div class="form-group">-->
<!--                    <label for="materialCode">Mã chất liệu:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="materialCode" id="materialCode" placeholder="Nhập mã chất liệu">-->
<!--                    <span class="error"></span>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="materialName">Tên chất liệu:</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input class="form-control" type="text" name="materialName" id="materialName" placeholder="Nhập tên chất liệu">-->
<!--                    <span class="error"></span>-->
<!--                </div>-->
<!--                <button class="btn btn-primary mt-2 w-100" id="save-material-btn">Lưu</button>-->
<!--            </form>-->

<!--        </div>-->
<!--    </div>-->
<!--    &lt;!&ndash;    End modal chất liệu&ndash;&gt;-->

<!--    <h4>Thông tin sản phẩm</h4>-->
<!--    <form th:object="${product}" th:method="post" th:action="${action}" id="formProduct1">-->
<!--        <div class="my-3">-->
<!--            <div class="form-group col-md-6" style="display: none">-->
<!--                <label>Mã sản phẩm</label>-->
<!--                <input type="text" class="form-control" th:field="*{code}" placeholder="-&#45;&#45;Mã tự động nếu để trống-&#45;&#45;">-->
<!--                <span class="error"></span>-->
<!--            </div>-->
<!--            <div class="form-row">-->
<!--                <div class="form-group col-md-6">-->
<!--                    <label>Tên sản phẩm</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <input type="text"  class="form-control" th:field="*{name}" placeholder="Mời nhập tên sản phẩm">-->
<!--                    <span class="error"></span>-->
<!--                </div>-->

<!--                <div class="form-group col-md-6">-->
<!--                    <div class="select-container">-->
<!--                        <label>Nhãn hàng</label>-->
<!--                        <span class="red_require"> *</span>-->
<!--                        <select class="form-select" th:field="*{brand}">-->
<!--                            <option th:value="${brand.id}" th:each="brand: ${listBrand}"-->
<!--                                    th:text="${brand.name}"></option>-->
<!--                        </select>-->
<!--&lt;!&ndash;                        <span id="add-brand" class="plus-icon"><i class="fas fa-plus"></i></span>&ndash;&gt;-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="form-row">-->
<!--                <div class="form-group col-md-6">-->
<!--                    <div class="select-container">-->
<!--                        <label>Chất liệu</label>-->
<!--                        <span class="red_require"> *</span>-->
<!--                        <select class="form-select" th:field="*{material}">-->
<!--                            <option th:value="${material.id}" th:each="material: ${listMaterial}"-->
<!--                                    th:text="${material.name}"></option>-->
<!--                        </select>-->
<!--&lt;!&ndash;                        <span id="add-material" class="plus-icon"><i class="fas fa-plus"></i></span>&ndash;&gt;-->
<!--                    </div>-->

<!--                </div>-->
<!--                <div class="form-group col-md-6">-->
<!--                    <label>Trạng thái</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <select class="form-select" th:field="*{status}">-->
<!--                        <option th:value="1" th:text="'Còn bán'" selected></option>-->
<!--                        <option th:value="2" th:text="'Ngừng bán'" ></option>-->
<!--                    </select>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="form-row">-->
<!--                <div class="form-group col-md-6">-->
<!--                    <label>Giới tính</label>-->
<!--                    <span class="red_require"> *</span>-->
<!--                    <select class="form-select" th:field="*{gender}">-->
<!--                        <option th:value="1" th:text="'Nam'" selected></option>-->
<!--                        <option th:value="2" th:text="'Nữ'" ></option>-->
<!--                        <option th:value="3" th:text="'Unisex'" ></option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                <div class="form-group col-md-6">-->
<!--                    <label>Mô tả</label>-->
<!--                    <textarea class="form-control" th:field="*{describe}" rows="3" placeholder="Mời nhập mô tả (nếu có)"></textarea>-->
<!--                    <span class="error"></span>-->
<!--                </div>-->
<!--            </div>-->
<!--            <button type="submit" class="btn btn-primary m-1"><i class="fa ti-save" id="next-btn"></i> Tiếp theo</button>-->
<!--            <a href="/admin/product-all" class="btn btn-dark m-1"><i class="fa fa-mail-reply (alias)"></i>-->
<!--                <span>Hủy</span></a>-->
<!--        </div>-->

<!--    </form>-->
<!--    <div th:if="${duplicateCode!=null}" th:text="${duplicateCode}" class="alert alert-danger ml-2 py-2 px-2"></div>-->
<!--    <div th:if="${duplicateName != null}" th:text="${duplicateName}" class="alert alert-danger ml-2 py-2 px-2"></div>-->
<!--    <script th:inline="javascript">-->
<!--        $(document).ready(function () {-->
<!--            $('#add-brand').on('click', function () {-->
<!--                $('#add-brand-modal').show()-->
<!--            })-->

<!--            $('#add-category').on('click', function () {-->
<!--                $('#add-category-modal').show()-->
<!--            })-->

<!--            $('#add-material').on('click', function () {-->
<!--                $('#add-material-modal').show()-->
<!--            })-->


<!--            $('.close').on('click', function () {-->
<!--                $(this).closest('.custom-modal').hide()-->
<!--            })-->

<!--            // VALIDATE BRAND-->
<!--            Validator({-->
<!--                form: '#brand-form',-->
<!--                formGroupSelector: '.form-group',-->
<!--                errorSelector: '.error',-->
<!--                rules: [-->
<!--                    Validator.isRequired('#brandName', 'Vui lòng nhập tên nhãn hàng'),-->
<!--                    Validator.isRequired('#brandCode', 'Vui lòng nhập mã nhãn hàng'),-->
<!--                    Validator.maxLength('#brandName', 30),-->
<!--                    Validator.maxLength('#brandCode', 20)-->
<!--                ],-->
<!--                onSubmit: async function (data) {-->
<!--                    var dataSend = {-->
<!--                        code: data.brandCode,-->
<!--                        name: data.brandName-->
<!--                    }-->
<!--                    await $.ajax({-->
<!--                        type: 'POST',-->
<!--                        dataType: 'json',-->
<!--                        contentType: "application/json; charset=utf-8",-->
<!--                        data: JSON.stringify(dataSend),-->
<!--                        url: '/api/brand',-->

<!--                        success: function (data) {-->
<!--                            $("#add-brand-modal").hide()-->
<!--                            $('#brand').append(`<option value="${data.id}">${data.name}</option>`)-->
<!--                            $('#brand').val(`${data.id}`)-->
<!--                        },-->
<!--                        error: function (xhr, status, error) {-->
<!--                            Swal.fire({-->
<!--                                title: "Lỗi",-->
<!--                                text: xhr.responseJSON.message,-->
<!--                                icon: "error"-->
<!--                            });-->
<!--                        }-->
<!--                    })-->
<!--                }-->
<!--            });-->
<!--            //END VALIDATE BRAND-->



<!--            //VALIDATE MATERIAL-->
<!--            Validator({-->
<!--                form: '#material-form',-->
<!--                formGroupSelector: '.form-group',-->
<!--                errorSelector: '.error',-->
<!--                rules: [-->
<!--                    Validator.isRequired('#materialCode', 'Vui lòng nhập mã chất liệu'),-->
<!--                    Validator.isRequired('#materialName', 'Vui lòng nhập tên chất liệu'),-->
<!--                    Validator.maxLength('#materialName', 30),-->
<!--                    Validator.maxLength('#materialCode', 20)-->
<!--                ],-->
<!--                onSubmit: async function (data) {-->
<!--                    var dataSend = {-->
<!--                        code: data.materialCode,-->
<!--                        name: data.materialName-->
<!--                    }-->
<!--                    await $.ajax({-->
<!--                        type: 'POST',-->
<!--                        dataType: 'json',-->
<!--                        contentType: "application/json; charset=utf-8",-->
<!--                        data: JSON.stringify(dataSend),-->
<!--                        url: '/api/material',-->

<!--                        success: function (data) {-->
<!--                            $("#add-material-modal").hide()-->
<!--                            $('#material').append(`<option value="${data.id}">${data.name}</option>`)-->
<!--                            $('#material').val(`${data.id}`)-->
<!--                        },-->
<!--                        error: function (xhr, status, error) {-->
<!--                            Swal.fire({-->
<!--                                title: "Lỗi",-->
<!--                                text: xhr.responseJSON.message,-->
<!--                                icon: "error"-->
<!--                            });-->
<!--                        }-->
<!--                    })-->
<!--                }-->
<!--            });-->

<!--            //VALIDATE MATERIAL-->
<!--            Validator({-->
<!--                form: '#formProduct1',-->
<!--                formGroupSelector: '.form-group',-->
<!--                errorSelector: '.error',-->
<!--                rules: [-->
<!--                    Validator.isRequired('#name', 'Vui lòng nhập tên sản phẩm'),-->
<!--                    Validator.maxLength('#name', 100),-->
<!--                    Validator.maxLength('#code', 20),-->
<!--                    Validator.maxLength('#describe', 300)-->
<!--                ]-->
<!--            });-->
<!--        });-->
<!--        -->

<!--        $(document).ready(function () {-->
<!--            $('#formProduct1').on('submit', function (event) {-->
<!--                event.preventDefault(); // Ngăn chặn việc gửi mẫu mặc định-->

<!--                const productName = $('#name').val();-->

<!--                $.ajax({-->
<!--                    type: 'GET',-->
<!--                    url: '/api/check-product-name',-->
<!--                    data: { name: productName },-->
<!--                    success: function (response) {-->
<!--                        if (response.exists) {-->
<!--                            $('.error').text('Tên sản phẩm đã tồn tại');-->
<!--                        } else {-->
<!--                            // Nếu không có trùng lặp, gửi mẫu-->
<!--                            this.submit(); // bạn có thể cần tham chiếu đúng đến mẫu hoặc xử lý gửi theo cách khác-->
<!--                        }-->
<!--                    },-->
<!--                    error: function () {-->
<!--                        $('.error').text('Có lỗi xảy ra khi kiểm tra tên sản phẩm');-->
<!--                    }-->
<!--                });-->
<!--            });-->
<!--        });-->
<!--    </script>-->

<!--</div>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/admin-layout.html}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Sản phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .modal-content {
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        .form-group label {
            font-weight: 600;
        }
        .red_require {
            color: red;
            font-weight: bold;
        }
        .btn-custom {
            border-radius: 5px;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
<div layout:fragment="content" class="container mt-4">
    <h4 class="mb-3">Thông tin sản phẩm</h4>
    <form th:object="${product}" th:method="post" th:action="${action}" id="formProduct1" class="p-4 bg-white shadow rounded">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3" style="display: none">
                    <label>Mã sản phẩm <span class="red_require">*</span> </label>
                    <input type="text" class="form-control" th:field="*{code}" placeholder="---Mã tự động nếu để trống---">

                </div>
<!--                <div class="form-group mb-3">-->
<!--                    <label>Tên sản phẩm <span class="red_require">*</span></label>-->
<!--                    <input type="text" class="form-control" id="name" th:field="*{name}" placeholder="Nhập tên sản phẩm">-->
<!--                    <span class="error" style="color: red;"></span> &lt;!&ndash; Phần tử để hiển thị thông báo lỗi &ndash;&gt;-->
<!--                </div>-->
                <div class="form-group mb-3">
                    <label>Tên sản phẩm <span class="red_require">*</span></label>
                    <input type="text" class="form-control" id="name" th:field="*{name}" placeholder="Nhập tên sản phẩm">
                    <span class="error" style="color: red;"></span> <!-- Phần tử để hiển thị thông báo lỗi -->
                </div>
<!--                <div class="form-group mb-3">-->
<!--                    <label>Tên sản phẩm <span class="red_require">*</span></label>-->
<!--                    <div style="display: flex; align-items: center;">-->
<!--                        <input type="text" class="form-control" id="additionalText"  value="Áo Polo Nam" readonly>-->
<!--                        <input type="text" class="form-control" id="name" th:field="*{name}" placeholder="Nhập thêm thông tin" style="margin-left: 5px;">-->
<!--                    </div>-->
<!--                    <span class="error" style="color: red;"></span> &lt;!&ndash; Phần tử để hiển thị thông báo lỗi &ndash;&gt;-->
<!--                </div>-->
                <div class="form-group mb-3">
                    <label>Nhãn hàng <span class="red_require">*</span></label>
                    <select class="form-select" th:field="*{brand}">
                        <option th:each="brand : ${listBrand}" th:value="${brand.id}" th:text="${brand.name}"></option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label>Chất liệu <span class="red_require">*</span></label>
                    <select class="form-select" th:field="*{material}">
                        <option th:each="material : ${listMaterial}" th:value="${material.id}" th:text="${material.name}"></option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label>Trạng thái <span class="red_require">*</span></label>
                    <select class="form-select" th:field="*{status}">
                        <option th:value="1">Còn bán</option>
                        <option th:value="2">Ngừng bán</option>
                    </select>
                </div>
<!--                <div class="form-group mb-3">-->
<!--                    <label>Giới tính <span class="red_require">*</span></label>-->
<!--                    <select class="form-select" th:field="*{gender}">-->
<!--                        <option th:value="1">Nam</option>-->
<!--                        <option th:value="2">Nữ</option>-->
<!--                        <option th:value="3">Unisex</option>-->
<!--                    </select>-->
<!--                </div>-->
                <div class="form-group mb-3">
                    <label>Giới tính <span class="red_require">*</span></label>
                    <select class="form-select" th:field="*{gender}" required>
                        <option th:value="1">Nam</option>
                        <option th:value="2" disabled>Nữ</option>
                        <option th:value="3" disabled>Unisex</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label>Mô tả</label>
                    <textarea class="form-control" th:field="*{describe}" rows="3" placeholder="Nhập mô tả (nếu có)"></textarea>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-primary btn-custom me-2">Lưu</button>
            <a href="/admin/product-all" class="btn btn-dark btn-custom">Hủy</a>
        </div>
        <div th:if="${duplicateName != null}" th:text="${duplicateName}" class="alert alert-danger ml-2 py-2 px-2 mb-3"></div>
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!--<div th:if="${duplicateCode!=null}" th:text="${duplicateCode}" class="alert alert-danger ml-2 py-2 px-2"></div>-->

<script th:inline="javascript">
    $(document).ready(function () {
        $('#add-brand').on('click', function () {
            $('#add-brand-modal').show()
        })

        $('#add-category').on('click', function () {
            $('#add-category-modal').show()
        })

        $('#add-material').on('click', function () {
            $('#add-material-modal').show()
        })


        $('.close').on('click', function () {
            $(this).closest('.custom-modal').hide()
        })
    });

    $(document).ready(function () {
        $('#formProduct1').on('submit', function (event) {
            event.preventDefault(); // Ngăn chặn việc gửi mẫu mặc định

            const productName = $('#name').val(); // Lấy giá trị của trường tên sản phẩm

            $.ajax({
                type: 'GET',
                url: '/api/check-product-name',
                data: { name: productName },
                success: function (response) {
                    if (response.exists) {
                        // Hiện thông báo lỗi khi tên sản phẩm đã tồn tại
                        $('.error').text('Tên sản phẩm đã tồn tại'); // Đảm bảo rằng phần tử này được nhắm đến chính xác
                    } else {
                        // Nếu không có trùng lặp, gửi mẫu
                        $('#formProduct1')[0].submit(); // Gửi mẫu thực sự
                    }
                },
                error: function () {
                    // Hiện thông báo lỗi nếu có lỗi xảy ra
                    $('.error').text('Có lỗi xảy ra khi kiểm tra tên sản phẩm');
                }
            });
        });
    });
        // document.addEventListener("DOMContentLoaded", function() {
        //     const nameInput = document.getElementById("name");
        //
        //     // Ngăn không cho người dùng sửa đổi nội dung ô nhập
        //     nameInput.addEventListener("keydown", function(event) {
        //         // Chặn phím Backspace và Delete
        //         if (event.key === "Backspace" || event.key === "Delete") {
        //             event.preventDefault();
        //         }
        //     });
        //
        //     // Ngăn không cho người dùng dán nội dung
        //     nameInput.addEventListener("paste", function(event) {
        //         event.preventDefault();
        //     });
        // });
</script>
</body>
</html>
